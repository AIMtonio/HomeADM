-- ---------------------------------------------------------------------------------
-- Routine DDL
-- Note: comments before and after the routine body will not be stored by the server
-- ---------------------------------------------------------------------------------
-- APORTACIONES
DELIMITER ;
DROP TABLE IF EXISTS `APORTACIONES`;
DELIMITER $$

CREATE TABLE `APORTACIONES` (
  `AportacionID` int(11) NOT NULL COMMENT 'ID de la Aportación PK.',
  `TipoAportacionID` int(11) DEFAULT NULL COMMENT 'Tipo de Aportación.',
  `CuentaAhoID` bigint(12) DEFAULT NULL COMMENT 'Cuenta de ahorro.',
  `ClienteID` int(11) DEFAULT NULL COMMENT 'Cliente ID.',
  `AperturaAport` char(2) DEFAULT 'FA' COMMENT 'Indica fecha de apertura de aportacion. FA:Fecha Actual / FP:Fecha Posterior',
  `FechaInicio` date DEFAULT NULL COMMENT 'Fecha de inicio de la Aportación.',
  `FechaVencimiento` date DEFAULT NULL COMMENT 'Fecha de vencimiento.',
  `FechaPago` date DEFAULT NULL COMMENT 'Fecha de pago.',
  `Monto` decimal(18,2) DEFAULT NULL COMMENT 'Monto de la Aportación.',
  `Plazo` int(11) DEFAULT NULL COMMENT 'Plazo real en días que hay entre la fecha de Inicio y la fecha de Vencimiento.',
  `TasaFija` decimal(14,4) DEFAULT NULL COMMENT 'tasa fija.',
  `TasaISR` decimal(12,4) DEFAULT NULL COMMENT 'tasa ISR.',
  `TasaNeta` decimal(12,4) DEFAULT NULL COMMENT 'tasa Neta.',
  `CalculoInteres` int(1) DEFAULT NULL COMMENT 'Calculo de interes.',
  `TasaBase` int(1) DEFAULT NULL COMMENT 'tasa base.',
  `SobreTasa` decimal(12,4) DEFAULT NULL COMMENT 'sobre tasa.',
  `PisoTasa` decimal(12,4) DEFAULT NULL COMMENT 'piso tasa.',
  `TechoTasa` decimal(12,4) DEFAULT NULL COMMENT 'techo tasa.',
  `InteresGenerado` decimal(18,2) DEFAULT NULL COMMENT 'interes generado.',
  `InteresRecibir` decimal(18,2) DEFAULT NULL COMMENT 'interes a recibir.',
  `InteresRetener` decimal(18,2) DEFAULT NULL COMMENT 'interes a retener.',
  `SaldoProvision` decimal(18,2) DEFAULT NULL COMMENT 'Se Inicializa al Inicio de cada mes.',
  `SaldoISR` decimal(18,2) DEFAULT '0.00' COMMENT 'Saldo del devengo diario de ISR',
  `ValorGat` decimal(12,4) DEFAULT NULL COMMENT 'valor del Gat.',
  `ValorGatReal` decimal(12,4) DEFAULT NULL COMMENT 'valor del Gat real .',
  `EstatusImpresion` char(1) DEFAULT NULL COMMENT 'Estatus de la impresión .',
  `MonedaID` int(11) DEFAULT NULL COMMENT 'ID de la moneda.',
  `FechaVenAnt` date DEFAULT NULL COMMENT 'Fecha de vencimiento anticipado .',
  `FechaApertura` date DEFAULT NULL COMMENT 'fecha de apertura .',
  `Estatus` char(1) DEFAULT NULL COMMENT 'Estatus\nN =vigente\nP =Pagada\nC =Cancelada\nA =Registrada\nL =Autorizada.',
  `TipoPagoInt` char(1) DEFAULT NULL COMMENT 'Indica la forma de pago de interes.\nV - Vencimiento\nF - Fin del Mes\nP - Por Periodo.\nE - Programado.',
  `DiasPeriodo` int(11) DEFAULT '0' COMMENT 'Indica el numero de dias si la forma de pago de interes es por PERIODO.',
  `PagoIntCal` char(2) DEFAULT NULL COMMENT 'Indica el tipo de pago de interes.\nI - Iguales\nD - Devengado.',
  `AportacionRenovada` int(11) DEFAULT '0' COMMENT 'Numero de Aportación que Fue Renovada.',
  `PlazoOriginal` int(11) DEFAULT NULL COMMENT 'Plazo en días capturado por el usuario desde pantalla.',
  `SucursalID` int(11) DEFAULT NULL COMMENT 'Sucursal donde fue Autorizada la Aportación.',
  `Reinversion` char(1) DEFAULT NULL COMMENT 'Especifica si realiza Reinversion Automatica\nS.- Si realiza Reinversion Automatica\nN.- No Realiza Reinversion.\nF.- Posterior',
  `Reinvertir` char(3) DEFAULT NULL COMMENT 'Tipo de Reinversión Automatica \nC = Capital \nCI = Capital mas interes \nN = Ninguna.',
  `FechaCancela` date DEFAULT NULL COMMENT 'Fecha de cancelación de la Aportación.',
  `UsuarioAut` int(11) DEFAULT NULL COMMENT 'Usuario que realiza la autorizacion de la cancelacion o el vencimiento anticipado de la Aportación.',
  `CajaRetiro` int(11) DEFAULT NULL COMMENT 'Sucursal en la que se retirara el monto de la inversión al finalizar.',
  `ISRReal` decimal(14,2) DEFAULT '0.00' COMMENT 'Acumula el ISR Diario por socio solo cuando este activa esta opcion en PARAMGENERALES.',
  `MontoGlobal` decimal(18,2) DEFAULT '0.00' COMMENT 'Monto Global del Cliente. Puede incluir el monto de los productos vigentes de los integrantes de su gpo. familiar.',
  `TasaMontoGlobal` char(1) DEFAULT 'N' COMMENT 'Valor del Tipo de Aportación al momento del registro.\nN: NO.\nS: SI.',
  `IncluyeGpoFam` char(1) DEFAULT 'N' COMMENT 'Valor del Tipo de Aportación al momento del registro.\nN: NO.\nS: SI.',
  `DiasPago` int(11) DEFAULT '0' COMMENT 'Indica el dia de pago de la aportacion',
  `PagoIntCapitaliza` char(1) DEFAULT 'I' COMMENT 'Indica si capitaliza interes S:Si, N:No, I:Indistinto',
  `OpcionAport` varchar(50) DEFAULT '' COMMENT 'Indica la opcion elegida en el combo aportacion. En alta de aportacion',
  `CantidadReno` decimal(18,2) DEFAULT '0.00' COMMENT 'Indica la cantidad de renovacion de la aportacion',
  `InvRenovar` int(11) DEFAULT '0' COMMENT 'Numero Aportacion renovada en alta y modificacion de Aportaciones',
  `Notas` varchar(500) DEFAULT '' COMMENT 'Notas puntuales de la aportacion',
  `MotivoCancela` varchar(100) DEFAULT '' COMMENT 'Motivo de cancelación de la aportación.',
  `ConCondiciones` char(1) DEFAULT 'N' COMMENT 'Indica si la aportación tiene condiciones capturadas.\nS.- Si\nN.- N',
  `ConsolidarSaldos` char(1) DEFAULT 'N' COMMENT 'Indica si Consolida Aportaciones Vigentes que venzan\nel mismo día que la Aportación a Consolidar.\nAplica para Tipo de Reinversión con Más.\nN: No (default)\nG: Sí Tipo Grupo\nI: Sí Tipo Integrante',
  `EmpresaID` int(11) DEFAULT NULL COMMENT 'Parametro de auditoria.',
  `UsuarioID` int(11) DEFAULT NULL COMMENT 'Parametro de auditoria.',
  `FechaActual` datetime DEFAULT NULL COMMENT 'Parametro de auditoria.',
  `DireccionIP` varchar(15) DEFAULT NULL COMMENT 'Parametro de auditoria.',
  `ProgramaID` varchar(50) DEFAULT NULL COMMENT 'Parametro de auditoria.',
  `Sucursal` int(11) DEFAULT NULL COMMENT 'Parametro de auditoria.',
  `NumTransaccion` bigint(20) DEFAULT NULL COMMENT 'Parametro de auditoria.',
  PRIMARY KEY (`AportacionID`),
  KEY `fk_APORTACIONES_1_idx` (`ClienteID`),
  KEY `fk_APORTACIONES_2_idx` (`CuentaAhoID`),
  KEY `fk_APORTACIONES_3_idx` (`MonedaID`),
  KEY `fk_APORTACIONES_4_idx` (`TipoAportacionID`),
  KEY `INDEX_APORTACIONES_1` (`FechaPago`,`Reinversion`,`Estatus`,`ConCondiciones`),
  KEY `INDEX_APORTACIONES_2` (`Estatus`,`ConCondiciones`),
  CONSTRAINT `fk_APORTACIONES_1` FOREIGN KEY (`ClienteID`) REFERENCES `CLIENTES` (`ClienteID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_APORTACIONES_3` FOREIGN KEY (`MonedaID`) REFERENCES `MONEDAS` (`MonedaId`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_APORTACIONES_4` FOREIGN KEY (`TipoAportacionID`) REFERENCES `TIPOSAPORTACIONES` (`TipoAportacionID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Tab: Aportaciones.'$$